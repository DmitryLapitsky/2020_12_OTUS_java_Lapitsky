## Оценка сборщиков мусора
-XX:+UseG1GC
-XX:+UseParallelGC
-XX:+UseSerialGC
'-XX:+UseConcMarkSweepGC
Для проведения оценок был составлен стенд, приводящий к out of memory exception (oom). Для базового теста использовался сборщик мусора (gc) -XX:+UseG1GC, для которого были определены константы для получения oom за примерно 5 минут. Использовался подход, когда в 1-м цикле запускался 2-й цикл с увеличивающимся количеством объектов в каждой итерации (количество создаваемых объектов отслеживалось). Половина объектов после инициализации (но без ссылки на объект) "уничтожается" - заменяется значением null.
В процессе подсчитывается колчиство сборщиком young и old generation, а так же суммируется по ним время отдельно для каждого типа.

##проверка времени на сборки за минуту
для сборщика мусора -XX:+UseG1GC


#####хип 256 мб
|Test time [s]|Amount of young gen.|young total time [ms]|Amount of old gen.|old total time [ms]|gc total time [s]|gc builds in minute|
| ------------- | ------------- |------------- |------------- |------------- |------------- |------------- |
|271|2707|142445|267|21944|164.389|36.39608856|
|246|2593|135062|271|20970|156.032|38.05658537|
|276|2960|146408|329|33771|180.179|39.16934783|
|537|2816|251639|324|45796|297.435|33.23296089|
|398|2835|198865|311|31026|229.891|34.65693467|
|305|3316|154193|380|41184|195.377|38.43481967|
|306|2886|172287|324|29267|201.554|39.52039216|
|315|3377|159677|398|46663|206.34|39.30285714|
|260|2728|140366|285|24413|164.779|38.02592308|
|282|2938|146885|339|34572|181.457|38.60787234|
| | | | | |Average|37.54037817|

#####хип 384 мб
|Test time [s]|Amount of young gen.|young total time [ms]|Amount of old gen.|old total time [ms]|gc total time [s]|gc builds in minute|
| ------------- | ------------- |------------- |------------- |------------- |------------- |------------- |
|670|4944|336774|584|100482|437.256|39.15725373|
|658|4757|325094|552|90966|416.06|37.93860182|
|713|5187|351287|645|118851|470.138|39.56280505|
| | | | | |Average|38.8862202|

#####хип 512 мб
|Test time [s]|Amount of young gen.|young total time [ms]|Amount of old gen.|old total time [ms]|gc total time [s]|gc builds in minute|
| ------------- | ------------- |------------- |------------- |------------- |------------- |------------- |
|1106|6673|605907|656|75551|681.458|36.96878843|
|1125|6652|599889|634|70910|670.799|35.77594667|
|1091|6666|600654|644|73373|74.027|37.06839597|
| | | | | |Average|36.60437702|

Среднее количество сборок gc за минуту примерно 37,6 с $$\sigma$$=0.94
oom для 1024 получить не удалось с теми же параметрами. А изменять их - наружшить постоянство среды.


##сравнение gc
т.к. различные gc используют свои термины, то рассматривалось количество объектов, созданных перед падением (количество объектов /15000).
######-XX:+UseSerialGC

|Test time [s]|number of objects before fail / 15000| objects per sec |
| ------------- | ------------- | ------------- | 
|513|427350|833.0409357|
|533|427350|801.782364|
|513|427350|833.0409357|
| |Average|822.6214118|

######-XX:+UseParallelGC

|Test time [s] |number of objects before fail / 15000| objects per sec |
| ------------- | ------------- | ------------- | 
|293|190036|648.5870307|
|284|190036|669.1408451|
| |Average|658.8639379|

######-XX:+UseG1GC

|Test time [s]|number of objects before fail / 15000| objects per sec |
| ------------- | ------------- | ------------- | 
|325|250278|770.0861538|
|275|211575|769.3636364|
|264|209628|794.0454545|
| |Average|777.8317483|

######-XX:+UseConcMarkSweepGC

|Test time [s]|number of objects before fail / 15000| objects per sec |
| ------------- | ------------- | ------------- | 
|833|427350|513.0252101|
|824|427350|518.6286408|
| |Average|515.8269254|

Из таблицы следует, что пока самая первая версия выигрывает по скорости, но тормозится все. Приближается к ней только -XX:+UseG1GC.